{% extends "blog/base/base.html" %}

{% block content %}
    
    <section class="ftco-section ftco-no-pt ftco-no-pb">

        <div class="container">

            <div class="row d-flex">

                <div class="col-xl-8 py-5 px-md-5">
                    <div class="row pt-md-4">
                        
                        {% for item in obj %}

                            <div class="col-md-12">
                                <div class="blog-entry ftco-animate d-md-flex">
                                    <a href="{% url 'blog:post_detail' item.id %}" class="img img-2" style="background-image: url('{{ item.image.url }}');"></a>
                                    <div class="text text-2 pl-md-4">
                                        <h3 class="mb-2"><a href="{% url 'blog:post_detail' item.id %}">{{ item.title }}</a></h3>
                                        <div class="meta-wrap">
                                            <p class="meta">
                                                <span>
                                                    <i class="icon-calendar mr-2"></i>{{ item.created_at | date:'F d, Y' }}
                                                </span>
                                            </p>
                                            <p class="meta">
                                                <span>
                                                    <a href="{% url 'blog:user_posts' item.author %}">
                                                        <i class="icon-person mr-2"></i>{{ item.author }}
                                                    </a>
                                                </span>
                                                <span>
                                                    <a href="{% url 'blog:post_by_category' item.category.name %}">
                                                        <i class="icon-folder-o mr-2"></i>{{ item.category.name }}
                                                    </a>
                                                </span>
                                                <span>
                                                    <i class="icon-comment2 mr-2"></i>{{ item.get_comments }} comment{{ item.get_comments | pluralize }}
                                                </span>
                                            </p>
                                        </div>
                                        <p class="mb-4">{{ item.content | string_trunc | safe }}</p>
                                        <p><a href="{% url 'blog:post_detail' item.id %}" class="btn-custom">Read <span class="ion-ios-arrow-forward"></span></a></p>
                                    </div>
                                </div>
                            </div>

                        {% endfor %}
         
                    </div>

                    {% if is_paginated %}
                    
                        <div class="row">
                            <div class="col">
                                <div class="block-27">
                                    <ul>
                                        {% if page_obj.has_previous %}
                                            <a class="btn btn-outline-info mb-4" href="?page=1">&lt;&lt;</a>
                                            <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.previous_page_number }}">&lt;</a>
                                        {% endif %}
                                        {% for num in page_obj.paginator.page_range %}
                                            {% if page_obj.number == num %}
                                                <a class="btn btn-info mb-4" href="?page={{ num }}">{{ num }}</a>
                                            {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3'  %}
                                                <a class="btn btn-outline-info mb-4" href="?page={{ num }}">{{ num }}</a>
                                            {% endif %}
                                        {% endfor %}
                                        {% if page_obj.has_next %}
                                            <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.next_page_number }}">&gt;</a>
                                            <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.paginator.num_pages }}">&gt;&gt;</a>
                                        {% endif %}

                                    </ul>
                                </div>
                            </div>
                        </div>

                    {% endif %}

                </div>

                {% include "blog/base/sidebar.html" %}

            </div>

        </div>

    </section>

{% endblock content %}